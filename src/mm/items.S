#include <combo.h>

/* Use our own item collect behavior */
PATCH_START 0x801143cc
  j GetItemCollectBehavior
   nop
PATCH_END

/* MM already have 16 bits indices into the GI table */
/* Make link's gi held item unsigned */
PATCH_LOAD_STORE 8, 1
.int 0x80126a7c
.int 0x80129070
.int 0x801290a4
.int 0x801290d0
.int 0x8012916c
.int 0x80129178
.int 0x8012918c
.int 0x80129198
.int 0x801291cc
.int 0x801291f8
.int 0x80129248
.int 0x8082ed10
.int 0x8082ed14
.int 0x8084708c
.int 0x80848264
.int 0x80852c8c
.int 0x80853ad4
.int 0x80853b50
.int 0x80853b54
.int 0x80853bb8
.int 0x80859764
.int 0x8085a82c
.int 0x8085a83c
.int 0x8085b914
PATCH_END

/* Use our item-inventory handler */
PATCH_START(0x8084834c)
  lw v0,0x24(sp)
  lw a0,0x20(sp)
  jal comboAddItemFromChest
   lh a1,0x384(v0)
PATCH_END

/* Replace every call to GiveItem */
PATCH_REL_JUMP comboGiveItem
.int 0x800a6348
.int 0x800a6a8c
.int 0x800a700c
.int 0x800b8b98
.int 0x800b8be4
.int 0x8010aa34
.int 0x8013ca00
.int 0x8085a87c
.int 0x8088dffc
.int 0x808a46cc
.int 0x808a9dac
.int 0x808aa324
.int 0x808b9d38
.int 0x808bcf38
.int 0x808f3bbc
.int 0x808f3cbc
.int 0x808f3dbc
.int 0x808f4808
.int 0x808f4ce8
.int 0x808f4da0
.int 0x808f506c
.int 0x808f5390
.int 0x808f5428
.int 0x8090a950
.int 0x8090aaec
.int 0x8091bcc4
.int 0x8091f814
.int 0x809200e0
.int 0x8092637c
.int 0x80928d50
.int 0x8095287c
.int 0x80952960
.int 0x80952a04
.int 0x8095314c
.int 0x80953168
.int 0x8095e8f4
.int 0x8095e918
.int 0x809635cc
.int 0x809635ec
.int 0x809660cc
.int 0x8096a370
.int 0x809989cc
.int 0x80998a30
.int 0x8099cbb4
.int 0x8099cc50
.int 0x809c2ba8
.int 0x809c2bc8
.int 0x809c59c0
.int 0x809c5a8c
.int 0x809c7b64
.int 0x809c7b90
.int 0x809c7bc4
.int 0x809c7bdc
.int 0x809c7e14
.int 0x809c7e30
.int 0x809c7e64
.int 0x809c7e7c
.int 0x80a0e468
.int 0x80a0eae0
.int 0x80a1cbdc
.int 0x80a635c4
.int 0x80a65618
.int 0x80a65630
.int 0x80a65658
.int 0x80a65694
.int 0x80a656ac
.int 0x80a6b8b4
.int 0x80a6fea8
.int 0x80a6fec0
.int 0x80a72bec
.int 0x80a8c1d0
.int 0x80a8c530
.int 0x80a8c54c
.int 0x80a8cc44
.int 0x80a8e014
.int 0x80a90588
.int 0x80a976a8
.int 0x80aab1fc
.int 0x80ad4078
.int 0x80ad4094
.int 0x80adbc48
.int 0x80ae04ac
.int 0x80ae3cb0
.int 0x80ae3cd4
.int 0x80ae42e4
.int 0x80aeb64c
.int 0x80aeb66c
.int 0x80afdecc
.int 0x80afdee8
.int 0x80b109c4
.int 0x80b27730
.int 0x80b27748
.int 0x80b2e2a8
.int 0x80b32178
.int 0x80b39f44
.int 0x80b3d8fc
.int 0x80b402ec
.int 0x80b41df0
.int 0x80b4246c
.int 0x80b4af64
.int 0x80b525c8
.int 0x80b5c1a4
.int 0x80b5c228
.int 0x80b63390
.int 0x80b67524
.int 0x80b67c00
.int 0x80b9012c
.int 0x80b9014c
.int 0x80b95024
.int 0x80b985d4
.int 0x80b98f7c
.int 0x80ba4e10
.int 0x80ba9b0c
.int 0x80bb0f7c
.int 0x80bb3290
.int 0x80bb47e0
.int 0x80bbb3fc
.int 0x80bbee5c
.int 0x80bbef18
.int 0x80bc7504
.int 0x80bc9cd4
.int 0x80bc9cf8
.int 0x80bc9e10
.int 0x80bc9e34
.int 0x80bcb968
.int 0x80beab14
.int 0x80beabe0
.int 0x80bef3e4
.int 0x80bef434
.int 0x80bfa9b0
.int 0x80bfc2d8
.int 0x80bfc344
.int 0x80c06840
.int 0x80c096d4
.int 0x80c096ec
.int 0x80c145cc
.int 0x80c145e4
PATCH_END
